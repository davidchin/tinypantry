angular.module('recipe')
  .config ($stateProvider, ModalProvider) ->
    $stateProvider
      .state 'recipes',
        url: '/recipes'
        abstract: true
        template: '<ui-view />'

      .state 'recipes.index',
        url: '?category&page&orderBy&query'
        templateUrl: '<%= asset_path("recipes/index.html") %>'
        controller: 'RecipesIndexController'

      .state 'recipes.show',
        url: '/:id'
        templateUrl: '<%= asset_path("recipes/show.html") %>'
        controller:  'RecipesShowController'

      .state 'recipes.edit',
        url: '/:id/edit'
        templateUrl: '<%= asset_path("recipes/edit.html") %>'
        controller:  'RecipesEditController'
        resolve: authorize: (authorize) -> authorize('admin')

    ModalProvider
      .when 'recipe',
        templateUrl: '<%= asset_path("recipes/show-modal.html") %>'
        controller:  'RecipesShowController'
