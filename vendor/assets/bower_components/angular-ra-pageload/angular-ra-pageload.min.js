/*!
 * angular-ra-pageload.js v0.1.0
 * 
 * Copyright 2014
 * MIT License
 */
!function(){"use strict";angular.module("ra.pageload",[]).config(["$httpProvider",function(a){a.interceptors.push("raLoadingInterceptor")}]).factory("raLoadingInterceptor",["$q","raLoadingProgress",function(a,b){var c={request:function(a){return b.initialized||b.init(),b.queue(a),a},response:function(a){return b.dequeue(a.config),a},requestError:function(a){return c.responseError(a)},responseError:function(c){return b.dequeue(c.config),a.reject(c)}};return c}]).factory("raLoadingProgress",["$rootScope","$timeout",function(a,b){var c={init:function(){return this.pendingRequests=[],this.ready=!1,this.initialized=!0,a.$on("$routeChangeSuccess",this.reset.bind(this)),a.$on("$routeUpdate",this.reset.bind(this)),this},reset:function(){return this.pendingRequests.length=0,this.ready=!1,this},queue:function(a){return a&&"GET"===a.method&&(this.pendingRequests.push(a.url),this.ready=!1),this},dequeue:function(a){var c=this.pendingRequests.indexOf(a&&a.url);return-1!==c&&this.pendingRequests.splice(c,1),b(function(){0!==this.pendingRequests.length||this.ready||(this.notify("pageload:ready"),this.ready=!0)}.bind(this)),this},notify:function(){return a.$broadcast.apply(a,arguments)}};return c}])}();